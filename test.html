<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>애니메이션 테스트</title>
    
    <!-- GSAP CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    
    <!-- ScrollTrigger CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
            background: #f0f0f0;
        }
        .test-section {
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #fff;
            margin: 20px 0;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .animated-element {
            padding: 20px;
            background: #007bff;
            color: white;
            border-radius: 5px;
            font-size: 18px;
        }
        .status {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 10px;
            background: #333;
            color: white;
            border-radius: 5px;
            font-size: 14px;
            max-width: 300px;
        }
        .test-buttons {
            position: fixed;
            top: 20px;
            left: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .test-btn {
            padding: 10px 15px;
            background: #28a745;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
        }
        .test-btn:hover {
            background: #218838;
        }
        .test-btn:disabled {
            background: #6c757d;
            cursor: not-allowed;
        }
    </style>
</head>
<body>
    <div class="status" id="status">로딩 중...</div>
    
    <div class="test-buttons">
        <button class="test-btn" onclick="testBasicAnimation()">기본 애니메이션 테스트</button>
        <button class="test-btn" onclick="testScrollAnimation()">스크롤 애니메이션 테스트</button>
        <button class="test-btn" onclick="testIndexSlogan()">Index Slogan 테스트</button>
        <button class="test-btn" onclick="testCDNAnimations()">CDN 애니메이션 테스트</button>
        <button class="test-btn" onclick="testAllAnimations()">모든 애니메이션 테스트</button>
        <button class="test-btn" onclick="checkLibraries()">라이브러리 상태 확인</button>
    </div>
    
    <div class="test-section">
        <div class="animated-element" id="element1">애니메이션 1</div>
    </div>
    
    <div class="test-section">
        <div class="animated-element" id="element2">애니메이션 2</div>
    </div>
    
    <div class="test-section">
        <div class="animated-element" id="element3">애니메이션 3</div>
    </div>
    
    <div class="test-section">
        <div class="animated-element" id="element4">애니메이션 4</div>
    </div>
    
    <script src="js/main.js"></script>
    <script src="js/index-slogan.js"></script>
    <script>
        // 스크립트 로드 오류 처리
        window.addEventListener('error', function(e) {
            console.error('스크립트 로드 오류:', e);
            if (e.target.src && e.target.src.includes('main.js')) {
                console.warn('main.js 로드 실패, CDN 라이브러리만 사용');
            }
        });
        
        // main.js 로드 후 전역 변수 확인
        function checkMainJSVariables() {
            console.log('main.js 변수 확인 중...');
            
            // window 객체에서 변수들 찾기
            const globalVars = Object.keys(window);
            const gsapVars = globalVars.filter(key => key.includes('gsap'));
            const scrollTriggerVars = globalVars.filter(key => key.includes('ScrollTrigger'));
            
            console.log('찾은 gsap 관련 변수들:', gsapVars);
            console.log('찾은 ScrollTrigger 관련 변수들:', scrollTriggerVars);
            
            // 특정 변수들 확인
            if (window.gsapWithCSS) {
                console.log('window.gsapWithCSS 발견:', window.gsapWithCSS);
            }
            if (window.ScrollTrigger_ScrollTrigger) {
                console.log('window.ScrollTrigger_ScrollTrigger 발견:', window.ScrollTrigger_ScrollTrigger);
            }
        }
        
        // GSAP와 ScrollTrigger 로드 확인
        function checkLibraries() {
            const status = document.getElementById('status');
            let statusText = '';
            
            if (typeof gsapWithCSS !== 'undefined') {
                console.log('gsapWithCSS 로드됨');
                statusText += 'gsapWithCSS: 로드됨<br>';
            } else {
                console.log('gsapWithCSS 로드 안됨');
                statusText += 'gsapWithCSS: 로드 안됨<br>';
            }
            
            if (typeof ScrollTrigger_ScrollTrigger !== 'undefined') {
                console.log('ScrollTrigger_ScrollTrigger 로드됨');
                statusText += 'ScrollTrigger: 로드됨<br>';
            } else {
                console.log('ScrollTrigger_ScrollTrigger 로드 안됨');
                statusText += 'ScrollTrigger: 로드 안됨<br>';
            }
            
            if (typeof gsap !== 'undefined') {
                console.log('gsap 로드됨:', gsap.version);
                statusText += 'gsap: 로드됨 (' + gsap.version + ')<br>';
            } else {
                console.log('gsap 로드 안됨');
                statusText += 'gsap: 로드 안됨<br>';
            }
            
            if (typeof ScrollTrigger !== 'undefined') {
                console.log('ScrollTrigger 로드됨');
                statusText += 'ScrollTrigger: 로드됨<br>';
            } else {
                console.log('ScrollTrigger 로드 안됨');
                statusText += 'ScrollTrigger: 로드 안됨<br>';
            }
            
            status.innerHTML = statusText;
        }
        
        function testBasicAnimation() {
            const status = document.getElementById('status');
            status.innerHTML = '기본 애니메이션 테스트 중...';
            
            if (typeof gsapWithCSS !== 'undefined') {
                // gsapWithCSS 사용
                gsapWithCSS.from('#element1', {
                    duration: 1,
                    y: 100,
                    opacity: 0,
                    ease: 'power2.out'
                });
                status.innerHTML = 'gsapWithCSS 애니메이션 실행됨';
            } else if (typeof gsap !== 'undefined') {
                // gsap 사용
                gsap.from('#element1', {
                    duration: 1,
                    y: 100,
                    opacity: 0,
                    ease: 'power2.out'
                });
                status.innerHTML = 'gsap 애니메이션 실행됨';
            } else {
                status.innerHTML = '애니메이션 라이브러리를 찾을 수 없습니다.';
            }
        }
        
        function testScrollAnimation() {
            const status = document.getElementById('status');
            status.innerHTML = '스크롤 애니메이션 테스트 중...';
            
            if (typeof ScrollTrigger_ScrollTrigger !== 'undefined') {
                // ScrollTrigger_ScrollTrigger 사용
                ScrollTrigger_ScrollTrigger.create({
                    trigger: '#element2',
                    start: 'top 80%',
                    onEnter: () => {
                        if (typeof gsapWithCSS !== 'undefined') {
                            gsapWithCSS.to('#element2', {
                                duration: 0.8,
                                scale: 1.2,
                                ease: 'back.out(1.7)'
                            });
                        }
                    }
                });
                status.innerHTML = 'ScrollTrigger_ScrollTrigger 애니메이션 설정됨';
            } else if (typeof ScrollTrigger !== 'undefined') {
                // ScrollTrigger 사용
                ScrollTrigger.create({
                    trigger: '#element2',
                    start: 'top 80%',
                    onEnter: () => {
                        if (typeof gsap !== 'undefined') {
                            gsap.to('#element2', {
                                duration: 0.8,
                                scale: 1.2,
                                ease: 'back.out(1.7)'
                            });
                        }
                    }
                });
                status.innerHTML = 'ScrollTrigger 애니메이션 설정됨';
            } else {
                status.innerHTML = 'ScrollTrigger를 찾을 수 없습니다.';
            }
        }
        
        function testIndexSlogan() {
            const status = document.getElementById('status');
            status.innerHTML = 'Index Slogan 애니메이션 테스트 중...';
            
            // index-slogan.js의 함수들이 정의되었는지 확인
            if (typeof initSimpleAnimations === 'function') {
                status.innerHTML = 'initSimpleAnimations 함수 발견됨';
                // 간단한 애니메이션 테스트
                const testElement = document.getElementById('element3');
                if (testElement) {
                    testElement.style.transition = 'all 0.5s ease-out';
                    testElement.style.transform = 'scale(1.2) rotate(5deg)';
                    setTimeout(() => {
                        testElement.style.transform = 'scale(1) rotate(0deg)';
                    }, 500);
                }
            } else {
                status.innerHTML = 'index-slogan.js 함수를 찾을 수 없습니다.';
            }
        }
        
        // CDN 라이브러리 테스트 함수 추가
        function testCDNAnimations() {
            const status = document.getElementById('status');
            status.innerHTML = 'CDN 애니메이션 테스트 중...';
            
            if (typeof gsap !== 'undefined' && typeof ScrollTrigger !== 'undefined') {
                // ScrollTrigger 등록
                gsap.registerPlugin(ScrollTrigger);
                
                // element4에 스크롤 애니메이션 적용
                ScrollTrigger.create({
                    trigger: '#element4',
                    start: 'top 80%',
                    onEnter: () => {
                        gsap.to('#element4', {
                            duration: 1,
                            rotation: 360,
                            scale: 1.3,
                            ease: 'elastic.out(1, 0.3)'
                        });
                    },
                    onLeave: () => {
                        gsap.to('#element4', {
                            duration: 0.5,
                            rotation: 0,
                            scale: 1,
                            ease: 'power2.out'
                        });
                    }
                });
                
                status.innerHTML = 'CDN 애니메이션 설정 완료! element4를 스크롤해서 확인하세요.';
            } else {
                status.innerHTML = 'CDN 라이브러리를 찾을 수 없습니다.';
            }
        }
        
        // 모든 애니메이션 동시 테스트
        function testAllAnimations() {
            const status = document.getElementById('status');
            status.innerHTML = '모든 애니메이션 테스트 중...';
            
            // element1: 기본 애니메이션
            if (typeof gsap !== 'undefined') {
                gsap.from('#element1', {
                    duration: 1.5,
                    x: -200,
                    opacity: 0,
                    ease: 'power2.out'
                });
            }
            
            // element2: 스케일 애니메이션
            if (typeof gsap !== 'undefined') {
                gsap.to('#element2', {
                    duration: 1,
                    scale: 1.2,
                    ease: 'back.out(1.7)',
                    yoyo: true,
                    repeat: 1
                });
            }
            
            // element3: 회전 애니메이션
            if (typeof gsap !== 'undefined') {
                gsap.to('#element3', {
                    duration: 2,
                    rotation: 720,
                    ease: 'power2.inOut'
                });
            }
            
            status.innerHTML = '모든 애니메이션 실행됨!';
        }
        
        // 페이지 로드 후 라이브러리 확인
        window.addEventListener('load', function() {
            checkLibraries();
        });
        
        // DOM 로드 후에도 확인
        document.addEventListener('DOMContentLoaded', function() {
            checkLibraries();
        });
        
        // 1초 후에도 확인 (main.js 로드 대기)
        setTimeout(checkLibraries, 1000);
    </script>
</body>
</html>
